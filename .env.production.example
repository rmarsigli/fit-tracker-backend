# FitTrack BR - Production Environment Configuration
# Copy this file to .env on your production server and fill in the values

# ===================================================
# APPLICATION
# ===================================================

APP_NAME="FitTrack BR"
APP_ENV=production
APP_KEY=base64:YOUR_32_CHARACTER_KEY_HERE_RUN_php_artisan_key:generate
APP_DEBUG=false
APP_URL=https://api.fittrackbr.com
APP_TIMEZONE=America/Sao_Paulo

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

BCRYPT_ROUNDS=12

# ===================================================
# LOGGING
# ===================================================

# Production logging - only log errors and above
LOG_CHANNEL=stack
LOG_STACK=daily
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error

# ===================================================
# DATABASE (PostgreSQL 16 + PostGIS 3.4)
# ===================================================

DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=fittrack_br
DB_USERNAME=fittrack_user
DB_PASSWORD=YOUR_SECURE_DATABASE_PASSWORD_HERE

# IMPORTANT: PostGIS extension is REQUIRED for spatial queries
# After creating database, run:
# CREATE EXTENSION IF NOT EXISTS postgis;
# CREATE EXTENSION IF NOT EXISTS postgis_topology;

# ===================================================
# SESSION
# ===================================================

SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_PATH=/
SESSION_DOMAIN=.fittrackbr.com

# ===================================================
# CACHE & QUEUE (Redis)
# ===================================================

# Use Redis for better performance in production
CACHE_STORE=redis
CACHE_PREFIX=fittrack_

BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
QUEUE_CONNECTION=redis

# ===================================================
# REDIS
# ===================================================

REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_QUEUE_DB=2

# ===================================================
# MAIL
# ===================================================

# Example: Using Mailgun
MAIL_MAILER=mailgun
MAIL_SCHEME=https
MAIL_HOST=smtp.mailgun.org
MAIL_PORT=587
MAIL_USERNAME=postmaster@mg.fittrackbr.com
MAIL_PASSWORD=YOUR_MAILGUN_PASSWORD
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@fittrackbr.com
MAIL_FROM_NAME="${APP_NAME}"

# Mailgun Configuration
MAILGUN_DOMAIN=mg.fittrackbr.com
MAILGUN_SECRET=YOUR_MAILGUN_SECRET
MAILGUN_ENDPOINT=api.mailgun.net

# Alternative: Using AWS SES
# MAIL_MAILER=ses
# AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
# AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
# AWS_DEFAULT_REGION=us-east-1
# AWS_SES_REGION=us-east-1

# Alternative: Using SMTP (Gmail, Office 365, etc.)
# MAIL_MAILER=smtp
# MAIL_HOST=smtp.gmail.com
# MAIL_PORT=587
# MAIL_USERNAME=your-email@gmail.com
# MAIL_PASSWORD=your-app-specific-password
# MAIL_ENCRYPTION=tls

# ===================================================
# AWS (S3 Storage - Optional)
# ===================================================

# Uncomment if using S3 for file storage
# AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
# AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
# AWS_DEFAULT_REGION=us-east-1
# AWS_BUCKET=fittrack-production
# AWS_USE_PATH_STYLE_ENDPOINT=false
# FILESYSTEM_DISK=s3

# ===================================================
# SENTRY (ERROR TRACKING - Required)
# ===================================================

# Get DSN from: https://sentry.io/settings/projects/YOUR_PROJECT/keys/
SENTRY_LARAVEL_DSN=https://YOUR_SENTRY_KEY@o123456.ingest.us.sentry.io/1234567
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1
SENTRY_ENVIRONMENT=production

# Optionally send frontend errors to Sentry
# VITE_SENTRY_DSN="${SENTRY_LARAVEL_DSN}"

# ===================================================
# TELESCOPE (DEV ONLY - MUST BE FALSE IN PRODUCTION!)
# ===================================================

# CRITICAL: NEVER enable Telescope in production!
# It exposes sensitive data and degrades performance
TELESCOPE_ENABLED=false

# ===================================================
# SANCTUM (API AUTHENTICATION)
# ===================================================

# API token expiration (in minutes)
SANCTUM_STATEFUL_DOMAINS=fittrackbr.com,api.fittrackbr.com
SANCTUM_TOKEN_EXPIRATION=525600

# ===================================================
# CORS
# ===================================================

# Configure allowed origins for API requests
# CORS_ALLOWED_ORIGINS=https://fittrackbr.com,https://www.fittrackbr.com
# CORS_ALLOWED_METHODS=*
# CORS_ALLOWED_HEADERS=*

# ===================================================
# RATE LIMITING
# ===================================================

# API rate limit per minute (default: 60)
# API_RATE_LIMIT=60
# API_RATE_LIMIT_AUTHENTICATED=120

# ===================================================
# SECURITY
# ===================================================

# Force HTTPS in production
FORCE_HTTPS=true

# Additional security headers (handled by middleware)
# HSTS_ENABLED=true
# HSTS_MAX_AGE=31536000

# ===================================================
# PERFORMANCE
# ===================================================

# OPcache should be enabled in production (configured in php.ini)
# Horizon workers (if using Laravel Horizon instead of basic queue workers)
# HORIZON_WORKERS=2

# ===================================================
# MONITORING & METRICS
# ===================================================

# Optionally secure the /metrics endpoint with a token
# METRICS_TOKEN=YOUR_RANDOM_SECRET_TOKEN_HERE

# ===================================================
# BACKUPS
# ===================================================

# Configure automatic backups (if using spatie/laravel-backup or similar)
# BACKUP_DISK=s3
# BACKUP_NOTIFICATIONS_MAIL_TO=admin@fittrackbr.com

# ===================================================
# THIRD-PARTY INTEGRATIONS
# ===================================================

# Add any third-party API keys here
# GOOGLE_MAPS_API_KEY=YOUR_GOOGLE_MAPS_KEY
# STRIPE_KEY=pk_live_YOUR_STRIPE_KEY
# STRIPE_SECRET=sk_live_YOUR_STRIPE_SECRET

# ===================================================
# DEPLOYMENT INFO (Optional - for reference)
# ===================================================

# DEPLOYED_BY=Your Name
# DEPLOYED_AT=2025-11-10
# GIT_COMMIT=abc123def
# VERSION=1.0.0

# ===================================================
# NOTES
# ===================================================

# After deployment, run these commands:
# 1. php artisan key:generate --force (if APP_KEY not set)
# 2. php artisan migrate --force
# 3. php artisan config:cache
# 4. php artisan route:cache
# 5. php artisan view:cache
# 6. php artisan event:cache

# Security checklist:
# - APP_DEBUG must be false
# - APP_ENV must be production
# - TELESCOPE_ENABLED must be false
# - Use strong, unique passwords
# - Enable HTTPS (SSL certificate)
# - Configure firewall rules
# - Enable automatic security updates
# - Set up database backups
# - Configure Sentry for error tracking
# - Use Redis for cache and sessions
# - Set up queue workers (Supervisor)
# - Configure log rotation

# Performance checklist:
# - Enable OPcache (php.ini)
# - Use Redis for cache/sessions
# - Enable route/config/view caching
# - Use --optimize-autoloader with composer
# - Configure CDN for static assets (if needed)
# - Enable Gzip/Brotli compression (Nginx)
# - Set proper cache headers
